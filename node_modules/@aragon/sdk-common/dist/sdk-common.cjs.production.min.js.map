{"version":3,"file":"sdk-common.cjs.production.min.js","sources":["../src/utils.ts","../src/encoding.ts","../src/errors.ts","../src/promises.ts","../src/uri.ts","../src/timeout.ts"],"sourcesContent":["export function isProposalId(propoosalId: string): boolean {\n  const regex = new RegExp(/^0x[A-Fa-f0-9]{40}_0x[A-Fa-f0-9]{1,64}$/i);\n  return regex.test(propoosalId);\n}\n","import { isProposalId } from \"./utils\";\nimport { hexZeroPad } from \"@ethersproject/bytes\";\n\n/** Decodes a hex string and returns it as a buffer */\nexport function hexToBytes(hexString: string): Uint8Array {\n  if (!hexString) return new Uint8Array();\n  else if (!/^(0x)?[0-9a-fA-F]*$/.test(hexString)) {\n    throw new Error(\"Invalid hex string\");\n  } else if (hexString.length % 2 !== 0) {\n    throw new Error(\"The hex string has an odd length\");\n  }\n\n  hexString = strip0x(hexString);\n  const bytes = [];\n  for (let i = 0; i < hexString.length; i += 2) {\n    bytes.push(\n      parseInt(hexString.substring(i, i + 2), 16),\n    );\n  }\n  return Uint8Array.from(bytes);\n}\n\n/** Encodes a buffer into a hex string with the \"0x\" prefix */\nexport function bytesToHex(buff: Uint8Array, skip0x?: boolean): string {\n  const bytes: string[] = [];\n  for (let i = 0; i < buff.length; i++) {\n    if (buff[i] >= 16) bytes.push(buff[i].toString(16));\n    else bytes.push(\"0\" + buff[i].toString(16));\n  }\n  if (skip0x) return bytes.join(\"\");\n  return \"0x\" + bytes.join(\"\");\n}\n\n/** Encodes the given big integer as a 32 byte big endian buffer */\nexport function bigIntToBuffer(number: bigint): Uint8Array {\n  let hexNumber = number.toString(16);\n  while (hexNumber.length < 64) hexNumber = \"0\" + hexNumber;\n  return hexToBytes(hexNumber);\n}\n\n/** Encodes the given big integer as a 32 byte little endian buffer */\nexport function bigIntToLeBuffer(number: bigint): Uint8Array {\n  return bigIntToBuffer(number).reverse();\n}\n\n/** Transforms the given (big endian) buffer into a big int */\nexport function bufferToBigInt(bytes: Buffer | Uint8Array): bigint {\n  // Ensure that it is a buffer\n  bytes = Buffer.from(bytes);\n  return BigInt(ensure0x(bytes.toString(\"hex\")));\n}\n\n/** Transforms the given (little endian) buffer into a endian big int */\nexport function bufferLeToBigInt(bytes: Buffer | Uint8Array): bigint {\n  bytes = Buffer.from(bytes);\n  return bufferToBigInt(bytes.reverse());\n}\n\nexport function ensure0x(value: string): string {\n  return value.startsWith(\"0x\") ? value : \"0x\" + value;\n}\n\nexport function strip0x(value: string): string {\n  return value.startsWith(\"0x\") ? value.substring(2) : value;\n}\n\n/**\n * Encodes a 0-1 ratio within the given digit precision for storage on a smart contract\n *\n * @export\n * @param {number} ratio\n * @param {number} digits\n * @return {*}  {bigint}\n */\nexport function encodeRatio(ratio: number, digits: number): number {\n  if (ratio < 0 || ratio > 1) {\n    throw new Error(\"The ratio value should range between 0 and 1\");\n  } else if (!Number.isInteger(digits) || digits < 1 || digits > 15) {\n    throw new Error(\n      \"The number of digits should range between 1 and 15\",\n    );\n  }\n  return Math.round(ratio * (10 ** digits));\n}\n/**\n * Decodes a value received from a smart contract to a number with\n *\n * @export\n * @param {bigint} onChainValue\n * @param {number} digits\n * @return {*}  {number}\n */\nexport function decodeRatio(\n  onChainValue: bigint | number,\n  digits: number,\n): number {\n  if (!Number.isInteger(digits) || digits < 1 || digits > 15) {\n    throw new Error(\n      \"The number of digits should be a positive integer between 1 and 15\",\n    );\n  } else if (onChainValue > 10 ** digits) {\n    throw new Error(\"The value is out of range\");\n  }\n\n  return Number(onChainValue) / (10 ** digits);\n}\n\n/** Encodes the particles of a proposalId into a globally unque value for subgraph */\nexport function encodeProposalId(pluginAddress: string, id: number) {\n  if (!/^0x[A-Fa-f0-9]{40}$/.test(pluginAddress)) {\n    throw new Error(\"Invalid address\");\n  }\n\n  return `${pluginAddress}_0x${id.toString(16)}`;\n}\n\n/** Decodes a proposalId from subgraph and returns the original pluginAddress and the nonce */\nexport function decodeProposalId(\n  proposalId: string,\n): { pluginAddress: string; id: number } {\n  if (!isProposalId(proposalId)) {\n    throw new Error(\"Invalid proposalId\");\n  }\n\n  const matchedRegexResult =\n    proposalId.match(/^(0x[A-Fa-f0-9]{40})_(0x[A-Fa-f0-9]{1,64})$/) || [];\n  if (matchedRegexResult.length !== 3) {\n    throw new Error(\"Could not parse the proposal ID\");\n  }\n\n  return {\n    pluginAddress: matchedRegexResult[1],\n    id: parseInt(strip0x(matchedRegexResult[2]), 16),\n  };\n}\n\n/** Gets the extended version of a proposal id from the compact one */\nexport const getExtendedProposalId = (proposalId: string): string => {\n  if (!proposalId.match(/^(0x[A-Fa-f0-9]{40})_(0x[A-Fa-f0-9]{1,64})$/)) {\n    throw new Error(\"Invalid proposalId\");\n  }\n  const splits = proposalId.split(\"_\");\n  return splits[0].toLowerCase() + \"_\" + hexZeroPad(splits[1], 32);\n};\n/** Gets the compact version of a proposal id from the extended one */\nexport const getCompactProposalId = (proposalId: string): string => {\n  if (!proposalId.match(/^(0x[A-Fa-f0-9]{40})_(0x[A-Fa-f0-9]{1,64})$/)) {\n    throw new Error(\"Invalid proposalId\");\n  }\n  const splits = proposalId.split(\"_\");\n  return splits[0].toLowerCase() + \"_0x\" + parseInt(splits[1]).toString(16);\n};\n\n/** Transforms an array of booleans into a bitmap big integer */\nexport function boolArrayToBitmap(bools?: Array<boolean>) {\n  if (!bools || !bools.length) return BigInt(0);\n  else if (bools.length > 256) throw new Error(\"The array is too big\");\n\n  let result = BigInt(0);\n  for (let i = 0; i < 256; i++) {\n    if (!bools[i]) continue;\n    result |= BigInt(1) << BigInt(i);\n  }\n\n  return result;\n}\n\n/** Transforms an array of booleans into a bitmap big integer */\nexport function bitmapToBoolArray(bitmap: bigint): Array<boolean> {\n  if (bitmap >= (BigInt(1) << BigInt(256))) {\n    throw new Error(\"The bitmap value is too big\");\n  }\n\n  const result: Array<boolean> = [];\n  for (let i = 0; i < 256; i++) {\n    const mask = BigInt(1) << BigInt(i);\n    result.push((bitmap & mask) != BigInt(0));\n  }\n\n  return result;\n}\n","class SdkError extends Error {\n  public cause?: Error | string;\n  constructor(message: string, cause?: any) {\n    super(message);\n    if (typeof cause === \"string\") {\n      this.cause = cause;\n    } else if (cause instanceof Error) {\n      this.cause = cause.message;\n    }\n  }\n}\n\nexport class TimeoutError extends SdkError {\n  constructor(message?: string, cause?: any) {\n    super(message ? message : \"Time out\", cause);\n  }\n}\nexport class UnsupportedProtocolError extends SdkError {\n  constructor(protocol: string, cause?: any) {\n    super(\"Unsupported protocol: \" + protocol, cause);\n  }\n}\nexport class GraphQLError extends SdkError {\n  constructor(model: string, cause?: any) {\n    super(\"Cannot fetch the \" + model + \" data from GraphQL\", cause);\n  }\n}\nexport class IpfsError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Cannot add or get data from ipfs\", cause);\n  }\n}\nexport class InvalidAddressOrEnsError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid address or ENS\", cause);\n  }\n}\nexport class InvalidAddressError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid address\", cause);\n  }\n}\nexport class InvalidCidError extends SdkError {\n  constructor(cause?: any) {\n    super(\"The value does not contain a valid CiD\", cause);\n  }\n}\nexport class InvalidProposalIdError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid proposal ID\", cause);\n  }\n}\nexport class NoProviderError extends SdkError {\n  constructor(cause?: any) {\n    super(\"A web3 provider is needed\", cause);\n  }\n}\nexport class NoSignerError extends SdkError {\n  constructor(cause?: any) {\n    super(\"A signer is needed\", cause);\n  }\n}\nexport class UnexpectedActionError extends SdkError {\n  constructor(cause?: any) {\n    super(\"The received action is different from the expected one\", cause);\n  }\n}\n\nexport class NoTokenAddress extends SdkError {\n  constructor(cause?: any) {\n    super(\"A token address is needed\", cause);\n  }\n}\n\nexport class NoDaoFactory extends SdkError {\n  constructor(cause?: any) {\n    super(\"A dao factory address is needed\", cause);\n  }\n}\n\nexport class NoPluginRepoRegistry extends SdkError {\n  constructor(cause?: any) {\n    super(\"A plugin repo registry address is needed\", cause);\n  }\n}\n\nexport class NoDaoRegistry extends SdkError {\n  constructor(cause?: any) {\n    super(\"A dao registry address is needed\", cause);\n  }\n}\n\nexport class IpfsPinError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to pin data on IPFS\", cause);\n  }\n}\n\nexport class ProposalCreationError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to create proposal\", cause);\n  }\n}\n\nexport class MissingExecPermissionError extends SdkError {\n  constructor(cause?: any) {\n    super(\"No plugin requests EXECUTE_PERMISSION\", cause);\n  }\n}\nexport class IpfsFetchError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to fetch data from IPFS\", cause);\n  }\n}\nexport class InvalidVotingModeError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid voting mode\", cause);\n  }\n}\nexport class UpdateAllowanceError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Could not define a minimum allowance\", cause);\n  }\n}\nexport class InvalidPrecisionError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid precision, number must be an integer greater than 0\", cause);\n  }\n}\nexport class FailedDepositError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to deposit\", cause);\n  }\n}\nexport class AmountMismatchError extends SdkError {\n  constructor(expected: bigint, received: bigint, cause?: any) {\n    super(\n      `Deposited amount mismatch. Expected: ${expected}, received: ${received}`,\n      cause,\n    );\n  }\n}\nexport class UnsupportedNetworkError extends SdkError {\n  constructor(network: string, cause?: any) {\n    super(\"Unsupported network: \" + network, cause);\n  }\n}\nexport class ClientNotInitializedError extends SdkError {\n  constructor(client: string, cause?: any) {\n    super(client + \" client is not initialized\", cause);\n  }\n}\nexport class NoNodesAvailableError extends SdkError {\n  constructor(name: string, cause?: any) {\n    super(\"No \" + name + \" nodes available\", cause);\n  }\n}\n\nexport class PluginInstallationPreparationError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to install plugin\", cause);\n  }\n}\nexport class DataDecodingError extends SdkError {\n  constructor(message: string, cause?: any) {\n    super(\"Cannot decode data: \" + message, cause);\n  }\n}\n\nexport class InvalidContractAddressError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid contract address\", cause);\n  }\n}\nexport class InvalidContractAbiError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid contract ABI\", cause);\n  }\n}\nexport class CannotEstimateGasError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Cannot estimate gas error\", cause);\n  }\n}\nexport class InstallationNotFoundError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Installation not found\", cause);\n  }\n}\nexport class PluginUninstallationPreparationError extends SdkError {\n  constructor(cause?: any) {\n    super(\"plugin uninstallation error\", cause);\n  }\n}\n\nexport class MissingMetadataError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Missing metadata\", cause);\n  }\n}\n\nexport class InvalidPrepareUninstallationAbiError extends SdkError {\n  constructor(cause?: Error) {\n    super(\"Invalid prepare uninstallation ABI\", cause);\n  }\n}\n\nexport class InvalidEnsError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid subdomain format: use a-z, 0-9 and -\", cause);\n  }\n}\n\nexport class DepositNativeTokenError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Please, use the token's transfer function directly\", cause);\n  }\n}\n","/**\n * This function emulates the Promise.allSettled()\n *\n * @param proms\n */\nexport function allSettled(\n  proms: Array<Promise<any>>,\n): Promise<\n  Array<{ value: any; status: string } | { reason: Error; status: string }>\n> {\n  return Promise.all(proms.map(reflect));\n}\n\nfunction reflect<T>(prom: Promise<T>) {\n  return prom\n    .then((value: T) => ({ value, status: \"fulfilled\" }))\n    .catch((reason: T) => ({ reason, status: \"rejected\" }));\n}\n\nexport async function runAndRetry<T>({ func, onFail, shouldRetry }: {\n  func: () => Promise<T>;\n  onFail?: (e: Error) => void;\n  shouldRetry: () => boolean;\n}) {\n  let lastErr: Error;\n  do {\n    try {\n      const result = await func();\n      // it worked\n      return result;\n    } catch (err) {\n      lastErr = err as Error;\n      if (typeof onFail === \"function\") {\n        onFail(err as Error);\n      }\n    }\n  } while (shouldRetry());\n\n  // all the iterations failed\n  throw lastErr;\n}\n","import { InvalidCidError } from \"./errors\";\nexport class MultiUri {\n  readonly items: string[] = [];\n\n  constructor(multiUri: string) {\n    if (!multiUri) throw new Error(\"The multi URI is empty\");\n    this.items = multiUri.split(\",\");\n  }\n\n  get ipfsCid() {\n    for (let item of this.items) {\n      if (IPFS_CID_REGEX.test(item)) return item;\n      else if (item.startsWith(\"ipfs://\")) {\n        item = item.substring(7);\n      }\n      const idx = item.indexOf(\"/\");\n      const cid = (idx < 0) ? item : item.substring(0, idx);\n\n      if (!IPFS_CID_REGEX.test(cid)) continue;\n      return cid;\n    }\n    return null;\n  }\n  get ipfs() {\n    for (let item of this.items) {\n      if (IPFS_CID_REGEX.test(item)) return { cid: item, path: \"\" };\n      else if (item.startsWith(\"ipfs://\")) {\n        item = item.substring(7);\n      }\n      let pathIdx = item.indexOf(\"/\");\n\n      let cid = item;\n      if (pathIdx < 0) {\n        if (!IPFS_CID_REGEX.test(cid)) continue;\n        return { cid, path: \"\" };\n      }\n      cid = item.substring(0, pathIdx);\n      if (!IPFS_CID_REGEX.test(cid)) continue;\n\n      let searchIdx = item.indexOf(\"?\");\n      if (searchIdx < 0) searchIdx = item.indexOf(\"#\");\n\n      if (searchIdx < 0) {\n        return {\n          cid,\n          path: item.substring(pathIdx),\n        };\n      }\n\n      return {\n        cid,\n        path: item.substring(pathIdx, searchIdx),\n      };\n    }\n    return null;\n  }\n  get http() {\n    return this.items.filter((item) =>\n      item.startsWith(\"http://\") || item.startsWith(\"https://\")\n    );\n  }\n}\n\nconst IPFS_CID_REGEX =\n  /^Qm([1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})$/;\n\n/** Attempts to parse the given string as a URL and returns the IPFS CiD contained in it.\n * Alternatively it tries to use the raw value after validating it.\n */\nexport function resolveIpfsCid(data: string): string {\n  const uri = new MultiUri(data);\n  const cid = uri.ipfsCid;\n  if (!cid) {\n    throw new InvalidCidError();\n  }\n  return cid;\n}\n","import { TimeoutError } from \"./errors\";\n\n/**\n * @param func The promise-returning function to invoke\n * @param timeout Timeout (in seconds) to wait before failing\n * @param timeoutMessage (optional) Message to use when throwing a timeout error\n */\nexport function promiseFuncWithTimeout<T>(\n  func: () => Promise<T>,\n  timeout: number,\n  timeoutMessage?: string,\n): Promise<T> {\n  if (typeof func !== \"function\") throw new Error(\"Invalid function\");\n  else if (isNaN(timeout) || timeout < 0) throw new Error(\"Invalid timeout\");\n\n  return new Promise((resolve, reject) => {\n    setTimeout(\n      () => reject(new TimeoutError(timeoutMessage || \"Time out\")),\n      timeout,\n    );\n\n    return func()\n      .then((result) => resolve(result))\n      .catch((err) => reject(err));\n  });\n}\n\n/**\n * @param prom The promise to track\n * @param timeout Timeout (in milliseconds) to wait before failing\n * @param timeoutMessage (optional) Message to use when throwing a timeout error. By default: `\"Time out\"`\n */\nexport function promiseWithTimeout<T>(\n  prom: Promise<T>,\n  timeout: number,\n  timeoutMessage?: string,\n): Promise<T> {\n  if (\n    !prom ||\n    typeof prom.then !== \"function\" ||\n    typeof prom.catch !== \"function\"\n  ) {\n    throw new Error(\"Invalid promise\");\n  } else if (isNaN(timeout) || timeout < 0) throw new Error(\"Invalid timeout\");\n\n  return new Promise((resolve, reject) => {\n    setTimeout(\n      () => reject(new TimeoutError(timeoutMessage || \"Time out\")),\n      timeout,\n    );\n\n    return prom.then((result) => resolve(result)).catch((err) => reject(err));\n  });\n}\n\n"],"names":["isProposalId","propoosalId","RegExp","test","hexToBytes","hexString","Uint8Array","Error","length","strip0x","bytes","i","push","parseInt","substring","from","bigIntToBuffer","number","hexNumber","toString","bufferToBigInt","Buffer","BigInt","ensure0x","value","startsWith","SdkError","_Error","message","cause","_this","call","_inheritsLoose","_wrapNativeSuper","TimeoutError","_SdkError","UnsupportedProtocolError","_SdkError2","protocol","GraphQLError","_SdkError3","model","IpfsError","_SdkError4","InvalidAddressOrEnsError","_SdkError5","InvalidAddressError","_SdkError6","InvalidCidError","_SdkError7","InvalidProposalIdError","_SdkError8","NoProviderError","_SdkError9","NoSignerError","_SdkError10","UnexpectedActionError","_SdkError11","NoTokenAddress","_SdkError12","NoDaoFactory","_SdkError13","NoPluginRepoRegistry","_SdkError14","NoDaoRegistry","_SdkError15","IpfsPinError","_SdkError16","ProposalCreationError","_SdkError17","MissingExecPermissionError","_SdkError18","IpfsFetchError","_SdkError19","InvalidVotingModeError","_SdkError20","UpdateAllowanceError","_SdkError21","InvalidPrecisionError","_SdkError22","FailedDepositError","_SdkError23","AmountMismatchError","_SdkError24","expected","received","UnsupportedNetworkError","_SdkError25","network","ClientNotInitializedError","_SdkError26","client","NoNodesAvailableError","_SdkError27","name","PluginInstallationPreparationError","_SdkError28","DataDecodingError","_SdkError29","InvalidContractAddressError","_SdkError30","InvalidContractAbiError","_SdkError31","CannotEstimateGasError","_SdkError32","InstallationNotFoundError","_SdkError33","PluginUninstallationPreparationError","_SdkError34","MissingMetadataError","_SdkError35","InvalidPrepareUninstallationAbiError","_SdkError36","InvalidEnsError","_SdkError37","DepositNativeTokenError","_SdkError38","reflect","prom","then","status","reason","_runAndRetry","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","func","onFail","shouldRetry","lastErr","wrap","_context","prev","next","abrupt","sent","t0","stop","apply","arguments","MultiUri","multiUri","this","items","split","key","get","_step","_iterator","_createForOfIteratorHelperLoose","done","item","IPFS_CID_REGEX","idx","indexOf","cid","_step2","_iterator2","path","pathIdx","searchIdx","filter","proms","Promise","all","map","reverse","bitmap","result","mask","bools","buff","skip0x","join","proposalId","matchedRegexResult","match","pluginAddress","id","onChainValue","digits","Number","isInteger","Math","pow","ratio","round","splits","toLowerCase","hexZeroPad","timeout","timeoutMessage","isNaN","resolve","reject","setTimeout","err","data","ipfsCid","_x"],"mappings":"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"}