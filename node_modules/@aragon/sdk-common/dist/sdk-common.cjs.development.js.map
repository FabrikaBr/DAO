{"version":3,"file":"sdk-common.cjs.development.js","sources":["../src/utils.ts","../src/encoding.ts","../src/errors.ts","../src/promises.ts","../src/uri.ts","../src/timeout.ts"],"sourcesContent":["export function isProposalId(propoosalId: string): boolean {\n  const regex = new RegExp(/^0x[A-Fa-f0-9]{40}_0x[A-Fa-f0-9]{1,64}$/i);\n  return regex.test(propoosalId);\n}\n","import { isProposalId } from \"./utils\";\nimport { hexZeroPad } from \"@ethersproject/bytes\";\n\n/** Decodes a hex string and returns it as a buffer */\nexport function hexToBytes(hexString: string): Uint8Array {\n  if (!hexString) return new Uint8Array();\n  else if (!/^(0x)?[0-9a-fA-F]*$/.test(hexString)) {\n    throw new Error(\"Invalid hex string\");\n  } else if (hexString.length % 2 !== 0) {\n    throw new Error(\"The hex string has an odd length\");\n  }\n\n  hexString = strip0x(hexString);\n  const bytes = [];\n  for (let i = 0; i < hexString.length; i += 2) {\n    bytes.push(\n      parseInt(hexString.substring(i, i + 2), 16),\n    );\n  }\n  return Uint8Array.from(bytes);\n}\n\n/** Encodes a buffer into a hex string with the \"0x\" prefix */\nexport function bytesToHex(buff: Uint8Array, skip0x?: boolean): string {\n  const bytes: string[] = [];\n  for (let i = 0; i < buff.length; i++) {\n    if (buff[i] >= 16) bytes.push(buff[i].toString(16));\n    else bytes.push(\"0\" + buff[i].toString(16));\n  }\n  if (skip0x) return bytes.join(\"\");\n  return \"0x\" + bytes.join(\"\");\n}\n\n/** Encodes the given big integer as a 32 byte big endian buffer */\nexport function bigIntToBuffer(number: bigint): Uint8Array {\n  let hexNumber = number.toString(16);\n  while (hexNumber.length < 64) hexNumber = \"0\" + hexNumber;\n  return hexToBytes(hexNumber);\n}\n\n/** Encodes the given big integer as a 32 byte little endian buffer */\nexport function bigIntToLeBuffer(number: bigint): Uint8Array {\n  return bigIntToBuffer(number).reverse();\n}\n\n/** Transforms the given (big endian) buffer into a big int */\nexport function bufferToBigInt(bytes: Buffer | Uint8Array): bigint {\n  // Ensure that it is a buffer\n  bytes = Buffer.from(bytes);\n  return BigInt(ensure0x(bytes.toString(\"hex\")));\n}\n\n/** Transforms the given (little endian) buffer into a endian big int */\nexport function bufferLeToBigInt(bytes: Buffer | Uint8Array): bigint {\n  bytes = Buffer.from(bytes);\n  return bufferToBigInt(bytes.reverse());\n}\n\nexport function ensure0x(value: string): string {\n  return value.startsWith(\"0x\") ? value : \"0x\" + value;\n}\n\nexport function strip0x(value: string): string {\n  return value.startsWith(\"0x\") ? value.substring(2) : value;\n}\n\n/**\n * Encodes a 0-1 ratio within the given digit precision for storage on a smart contract\n *\n * @export\n * @param {number} ratio\n * @param {number} digits\n * @return {*}  {bigint}\n */\nexport function encodeRatio(ratio: number, digits: number): number {\n  if (ratio < 0 || ratio > 1) {\n    throw new Error(\"The ratio value should range between 0 and 1\");\n  } else if (!Number.isInteger(digits) || digits < 1 || digits > 15) {\n    throw new Error(\n      \"The number of digits should range between 1 and 15\",\n    );\n  }\n  return Math.round(ratio * (10 ** digits));\n}\n/**\n * Decodes a value received from a smart contract to a number with\n *\n * @export\n * @param {bigint} onChainValue\n * @param {number} digits\n * @return {*}  {number}\n */\nexport function decodeRatio(\n  onChainValue: bigint | number,\n  digits: number,\n): number {\n  if (!Number.isInteger(digits) || digits < 1 || digits > 15) {\n    throw new Error(\n      \"The number of digits should be a positive integer between 1 and 15\",\n    );\n  } else if (onChainValue > 10 ** digits) {\n    throw new Error(\"The value is out of range\");\n  }\n\n  return Number(onChainValue) / (10 ** digits);\n}\n\n/** Encodes the particles of a proposalId into a globally unque value for subgraph */\nexport function encodeProposalId(pluginAddress: string, id: number) {\n  if (!/^0x[A-Fa-f0-9]{40}$/.test(pluginAddress)) {\n    throw new Error(\"Invalid address\");\n  }\n\n  return `${pluginAddress}_0x${id.toString(16)}`;\n}\n\n/** Decodes a proposalId from subgraph and returns the original pluginAddress and the nonce */\nexport function decodeProposalId(\n  proposalId: string,\n): { pluginAddress: string; id: number } {\n  if (!isProposalId(proposalId)) {\n    throw new Error(\"Invalid proposalId\");\n  }\n\n  const matchedRegexResult =\n    proposalId.match(/^(0x[A-Fa-f0-9]{40})_(0x[A-Fa-f0-9]{1,64})$/) || [];\n  if (matchedRegexResult.length !== 3) {\n    throw new Error(\"Could not parse the proposal ID\");\n  }\n\n  return {\n    pluginAddress: matchedRegexResult[1],\n    id: parseInt(strip0x(matchedRegexResult[2]), 16),\n  };\n}\n\n/** Gets the extended version of a proposal id from the compact one */\nexport const getExtendedProposalId = (proposalId: string): string => {\n  if (!proposalId.match(/^(0x[A-Fa-f0-9]{40})_(0x[A-Fa-f0-9]{1,64})$/)) {\n    throw new Error(\"Invalid proposalId\");\n  }\n  const splits = proposalId.split(\"_\");\n  return splits[0].toLowerCase() + \"_\" + hexZeroPad(splits[1], 32);\n};\n/** Gets the compact version of a proposal id from the extended one */\nexport const getCompactProposalId = (proposalId: string): string => {\n  if (!proposalId.match(/^(0x[A-Fa-f0-9]{40})_(0x[A-Fa-f0-9]{1,64})$/)) {\n    throw new Error(\"Invalid proposalId\");\n  }\n  const splits = proposalId.split(\"_\");\n  return splits[0].toLowerCase() + \"_0x\" + parseInt(splits[1]).toString(16);\n};\n\n/** Transforms an array of booleans into a bitmap big integer */\nexport function boolArrayToBitmap(bools?: Array<boolean>) {\n  if (!bools || !bools.length) return BigInt(0);\n  else if (bools.length > 256) throw new Error(\"The array is too big\");\n\n  let result = BigInt(0);\n  for (let i = 0; i < 256; i++) {\n    if (!bools[i]) continue;\n    result |= BigInt(1) << BigInt(i);\n  }\n\n  return result;\n}\n\n/** Transforms an array of booleans into a bitmap big integer */\nexport function bitmapToBoolArray(bitmap: bigint): Array<boolean> {\n  if (bitmap >= (BigInt(1) << BigInt(256))) {\n    throw new Error(\"The bitmap value is too big\");\n  }\n\n  const result: Array<boolean> = [];\n  for (let i = 0; i < 256; i++) {\n    const mask = BigInt(1) << BigInt(i);\n    result.push((bitmap & mask) != BigInt(0));\n  }\n\n  return result;\n}\n","class SdkError extends Error {\n  public cause?: Error | string;\n  constructor(message: string, cause?: any) {\n    super(message);\n    if (typeof cause === \"string\") {\n      this.cause = cause;\n    } else if (cause instanceof Error) {\n      this.cause = cause.message;\n    }\n  }\n}\n\nexport class TimeoutError extends SdkError {\n  constructor(message?: string, cause?: any) {\n    super(message ? message : \"Time out\", cause);\n  }\n}\nexport class UnsupportedProtocolError extends SdkError {\n  constructor(protocol: string, cause?: any) {\n    super(\"Unsupported protocol: \" + protocol, cause);\n  }\n}\nexport class GraphQLError extends SdkError {\n  constructor(model: string, cause?: any) {\n    super(\"Cannot fetch the \" + model + \" data from GraphQL\", cause);\n  }\n}\nexport class IpfsError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Cannot add or get data from ipfs\", cause);\n  }\n}\nexport class InvalidAddressOrEnsError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid address or ENS\", cause);\n  }\n}\nexport class InvalidAddressError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid address\", cause);\n  }\n}\nexport class InvalidCidError extends SdkError {\n  constructor(cause?: any) {\n    super(\"The value does not contain a valid CiD\", cause);\n  }\n}\nexport class InvalidProposalIdError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid proposal ID\", cause);\n  }\n}\nexport class NoProviderError extends SdkError {\n  constructor(cause?: any) {\n    super(\"A web3 provider is needed\", cause);\n  }\n}\nexport class NoSignerError extends SdkError {\n  constructor(cause?: any) {\n    super(\"A signer is needed\", cause);\n  }\n}\nexport class UnexpectedActionError extends SdkError {\n  constructor(cause?: any) {\n    super(\"The received action is different from the expected one\", cause);\n  }\n}\n\nexport class NoTokenAddress extends SdkError {\n  constructor(cause?: any) {\n    super(\"A token address is needed\", cause);\n  }\n}\n\nexport class NoDaoFactory extends SdkError {\n  constructor(cause?: any) {\n    super(\"A dao factory address is needed\", cause);\n  }\n}\n\nexport class NoPluginRepoRegistry extends SdkError {\n  constructor(cause?: any) {\n    super(\"A plugin repo registry address is needed\", cause);\n  }\n}\n\nexport class NoDaoRegistry extends SdkError {\n  constructor(cause?: any) {\n    super(\"A dao registry address is needed\", cause);\n  }\n}\n\nexport class IpfsPinError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to pin data on IPFS\", cause);\n  }\n}\n\nexport class ProposalCreationError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to create proposal\", cause);\n  }\n}\n\nexport class MissingExecPermissionError extends SdkError {\n  constructor(cause?: any) {\n    super(\"No plugin requests EXECUTE_PERMISSION\", cause);\n  }\n}\nexport class IpfsFetchError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to fetch data from IPFS\", cause);\n  }\n}\nexport class InvalidVotingModeError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid voting mode\", cause);\n  }\n}\nexport class UpdateAllowanceError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Could not define a minimum allowance\", cause);\n  }\n}\nexport class InvalidPrecisionError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid precision, number must be an integer greater than 0\", cause);\n  }\n}\nexport class FailedDepositError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to deposit\", cause);\n  }\n}\nexport class AmountMismatchError extends SdkError {\n  constructor(expected: bigint, received: bigint, cause?: any) {\n    super(\n      `Deposited amount mismatch. Expected: ${expected}, received: ${received}`,\n      cause,\n    );\n  }\n}\nexport class UnsupportedNetworkError extends SdkError {\n  constructor(network: string, cause?: any) {\n    super(\"Unsupported network: \" + network, cause);\n  }\n}\nexport class ClientNotInitializedError extends SdkError {\n  constructor(client: string, cause?: any) {\n    super(client + \" client is not initialized\", cause);\n  }\n}\nexport class NoNodesAvailableError extends SdkError {\n  constructor(name: string, cause?: any) {\n    super(\"No \" + name + \" nodes available\", cause);\n  }\n}\n\nexport class PluginInstallationPreparationError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Failed to install plugin\", cause);\n  }\n}\nexport class DataDecodingError extends SdkError {\n  constructor(message: string, cause?: any) {\n    super(\"Cannot decode data: \" + message, cause);\n  }\n}\n\nexport class InvalidContractAddressError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid contract address\", cause);\n  }\n}\nexport class InvalidContractAbiError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid contract ABI\", cause);\n  }\n}\nexport class CannotEstimateGasError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Cannot estimate gas error\", cause);\n  }\n}\nexport class InstallationNotFoundError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Installation not found\", cause);\n  }\n}\nexport class PluginUninstallationPreparationError extends SdkError {\n  constructor(cause?: any) {\n    super(\"plugin uninstallation error\", cause);\n  }\n}\n\nexport class MissingMetadataError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Missing metadata\", cause);\n  }\n}\n\nexport class InvalidPrepareUninstallationAbiError extends SdkError {\n  constructor(cause?: Error) {\n    super(\"Invalid prepare uninstallation ABI\", cause);\n  }\n}\n\nexport class InvalidEnsError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Invalid subdomain format: use a-z, 0-9 and -\", cause);\n  }\n}\n\nexport class DepositNativeTokenError extends SdkError {\n  constructor(cause?: any) {\n    super(\"Please, use the token's transfer function directly\", cause);\n  }\n}\n","/**\n * This function emulates the Promise.allSettled()\n *\n * @param proms\n */\nexport function allSettled(\n  proms: Array<Promise<any>>,\n): Promise<\n  Array<{ value: any; status: string } | { reason: Error; status: string }>\n> {\n  return Promise.all(proms.map(reflect));\n}\n\nfunction reflect<T>(prom: Promise<T>) {\n  return prom\n    .then((value: T) => ({ value, status: \"fulfilled\" }))\n    .catch((reason: T) => ({ reason, status: \"rejected\" }));\n}\n\nexport async function runAndRetry<T>({ func, onFail, shouldRetry }: {\n  func: () => Promise<T>;\n  onFail?: (e: Error) => void;\n  shouldRetry: () => boolean;\n}) {\n  let lastErr: Error;\n  do {\n    try {\n      const result = await func();\n      // it worked\n      return result;\n    } catch (err) {\n      lastErr = err as Error;\n      if (typeof onFail === \"function\") {\n        onFail(err as Error);\n      }\n    }\n  } while (shouldRetry());\n\n  // all the iterations failed\n  throw lastErr;\n}\n","import { InvalidCidError } from \"./errors\";\nexport class MultiUri {\n  readonly items: string[] = [];\n\n  constructor(multiUri: string) {\n    if (!multiUri) throw new Error(\"The multi URI is empty\");\n    this.items = multiUri.split(\",\");\n  }\n\n  get ipfsCid() {\n    for (let item of this.items) {\n      if (IPFS_CID_REGEX.test(item)) return item;\n      else if (item.startsWith(\"ipfs://\")) {\n        item = item.substring(7);\n      }\n      const idx = item.indexOf(\"/\");\n      const cid = (idx < 0) ? item : item.substring(0, idx);\n\n      if (!IPFS_CID_REGEX.test(cid)) continue;\n      return cid;\n    }\n    return null;\n  }\n  get ipfs() {\n    for (let item of this.items) {\n      if (IPFS_CID_REGEX.test(item)) return { cid: item, path: \"\" };\n      else if (item.startsWith(\"ipfs://\")) {\n        item = item.substring(7);\n      }\n      let pathIdx = item.indexOf(\"/\");\n\n      let cid = item;\n      if (pathIdx < 0) {\n        if (!IPFS_CID_REGEX.test(cid)) continue;\n        return { cid, path: \"\" };\n      }\n      cid = item.substring(0, pathIdx);\n      if (!IPFS_CID_REGEX.test(cid)) continue;\n\n      let searchIdx = item.indexOf(\"?\");\n      if (searchIdx < 0) searchIdx = item.indexOf(\"#\");\n\n      if (searchIdx < 0) {\n        return {\n          cid,\n          path: item.substring(pathIdx),\n        };\n      }\n\n      return {\n        cid,\n        path: item.substring(pathIdx, searchIdx),\n      };\n    }\n    return null;\n  }\n  get http() {\n    return this.items.filter((item) =>\n      item.startsWith(\"http://\") || item.startsWith(\"https://\")\n    );\n  }\n}\n\nconst IPFS_CID_REGEX =\n  /^Qm([1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})$/;\n\n/** Attempts to parse the given string as a URL and returns the IPFS CiD contained in it.\n * Alternatively it tries to use the raw value after validating it.\n */\nexport function resolveIpfsCid(data: string): string {\n  const uri = new MultiUri(data);\n  const cid = uri.ipfsCid;\n  if (!cid) {\n    throw new InvalidCidError();\n  }\n  return cid;\n}\n","import { TimeoutError } from \"./errors\";\n\n/**\n * @param func The promise-returning function to invoke\n * @param timeout Timeout (in seconds) to wait before failing\n * @param timeoutMessage (optional) Message to use when throwing a timeout error\n */\nexport function promiseFuncWithTimeout<T>(\n  func: () => Promise<T>,\n  timeout: number,\n  timeoutMessage?: string,\n): Promise<T> {\n  if (typeof func !== \"function\") throw new Error(\"Invalid function\");\n  else if (isNaN(timeout) || timeout < 0) throw new Error(\"Invalid timeout\");\n\n  return new Promise((resolve, reject) => {\n    setTimeout(\n      () => reject(new TimeoutError(timeoutMessage || \"Time out\")),\n      timeout,\n    );\n\n    return func()\n      .then((result) => resolve(result))\n      .catch((err) => reject(err));\n  });\n}\n\n/**\n * @param prom The promise to track\n * @param timeout Timeout (in milliseconds) to wait before failing\n * @param timeoutMessage (optional) Message to use when throwing a timeout error. By default: `\"Time out\"`\n */\nexport function promiseWithTimeout<T>(\n  prom: Promise<T>,\n  timeout: number,\n  timeoutMessage?: string,\n): Promise<T> {\n  if (\n    !prom ||\n    typeof prom.then !== \"function\" ||\n    typeof prom.catch !== \"function\"\n  ) {\n    throw new Error(\"Invalid promise\");\n  } else if (isNaN(timeout) || timeout < 0) throw new Error(\"Invalid timeout\");\n\n  return new Promise((resolve, reject) => {\n    setTimeout(\n      () => reject(new TimeoutError(timeoutMessage || \"Time out\")),\n      timeout,\n    );\n\n    return prom.then((result) => resolve(result)).catch((err) => reject(err));\n  });\n}\n\n"],"names":["isProposalId","propoosalId","regex","RegExp","test","hexToBytes","hexString","Uint8Array","Error","length","strip0x","bytes","i","push","parseInt","substring","from","bytesToHex","buff","skip0x","toString","join","bigIntToBuffer","number","hexNumber","bigIntToLeBuffer","reverse","bufferToBigInt","Buffer","BigInt","ensure0x","bufferLeToBigInt","value","startsWith","encodeRatio","ratio","digits","Number","isInteger","Math","round","pow","decodeRatio","onChainValue","encodeProposalId","pluginAddress","id","decodeProposalId","proposalId","matchedRegexResult","match","getExtendedProposalId","splits","split","toLowerCase","hexZeroPad","getCompactProposalId","boolArrayToBitmap","bools","result","bitmapToBoolArray","bitmap","mask","SdkError","_Error","_inheritsLoose","message","cause","_this","call","_wrapNativeSuper","TimeoutError","_SdkError","UnsupportedProtocolError","_SdkError2","protocol","GraphQLError","_SdkError3","model","IpfsError","_SdkError4","InvalidAddressOrEnsError","_SdkError5","InvalidAddressError","_SdkError6","InvalidCidError","_SdkError7","InvalidProposalIdError","_SdkError8","NoProviderError","_SdkError9","NoSignerError","_SdkError10","UnexpectedActionError","_SdkError11","NoTokenAddress","_SdkError12","NoDaoFactory","_SdkError13","NoPluginRepoRegistry","_SdkError14","NoDaoRegistry","_SdkError15","IpfsPinError","_SdkError16","ProposalCreationError","_SdkError17","MissingExecPermissionError","_SdkError18","IpfsFetchError","_SdkError19","InvalidVotingModeError","_SdkError20","UpdateAllowanceError","_SdkError21","InvalidPrecisionError","_SdkError22","FailedDepositError","_SdkError23","AmountMismatchError","_SdkError24","expected","received","UnsupportedNetworkError","_SdkError25","network","ClientNotInitializedError","_SdkError26","client","NoNodesAvailableError","_SdkError27","name","PluginInstallationPreparationError","_SdkError28","DataDecodingError","_SdkError29","InvalidContractAddressError","_SdkError30","InvalidContractAbiError","_SdkError31","CannotEstimateGasError","_SdkError32","InstallationNotFoundError","_SdkError33","PluginUninstallationPreparationError","_SdkError34","MissingMetadataError","_SdkError35","InvalidPrepareUninstallationAbiError","_SdkError36","InvalidEnsError","_SdkError37","DepositNativeTokenError","_SdkError38","allSettled","proms","Promise","all","map","reflect","prom","then","status","reason","runAndRetry","_x","_runAndRetry","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_ref","func","onFail","shouldRetry","lastErr","wrap","_callee$","_context","prev","next","sent","abrupt","t0","stop","MultiUri","multiUri","items","_createClass","key","get","_iterator","_createForOfIteratorHelperLoose","_step","done","item","IPFS_CID_REGEX","idx","indexOf","cid","_iterator2","_step2","path","pathIdx","searchIdx","filter","resolveIpfsCid","data","uri","ipfsCid","promiseFuncWithTimeout","timeout","timeoutMessage","isNaN","resolve","reject","setTimeout","err","promiseWithTimeout"],"mappings":"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"}